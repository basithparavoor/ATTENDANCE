<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Login</title>
    <link rel="stylesheet" href="STYLES.css">
</head>
<body>
    <div id="message-box" class="message-box"></div>
    <div class="login-container">
        <h2>Admin Login</h2>
        <form id="loginForm">
            <div class="form-group">
                <label for="user-id">User ID:</label>
                <input type="text" id="user-id" name="user-id" required>
            </div>
            <div class="form-group">
                <label for="password">Password:</label>
                <input type="password" id="password" name="password" required>
            </div>
            <button type="submit" class="button">Login</button>
        </form>
    </div>
    <script>
        const scriptURL = 'https://script.google.com/macros/s/AKfycbw1t_ljhXOQsoN0mnpamRSqoPILBvPpmnvhkEw0l3_p8MJMGKg9cMyP3_M23__QxWgfXw/exec';
        function showMessage(message) {
            const messageBox = document.getElementById('message-box');
            messageBox.textContent = message;
            messageBox.style.display = 'block';
            setTimeout(() => {
                messageBox.style.display = 'none';
            }, 3000);
        }
        document.getElementById('loginForm').addEventListener('submit', async function(event) {
            event.preventDefault();
            const userId = document.getElementById('user-id').value;
            const password = document.getElementById('password').value;
            try {
                const response = await fetch(`${scriptURL}?action=getUsers&role=administrator&username=${encodeURIComponent(userId)}&password=${encodeURIComponent(password)}`);
                const result = await response.json();
                if (result.users) {
                    localStorage.setItem('loggedInUser', userId);
                    localStorage.setItem('userRole', 'administrator');
                    window.location.href = "DASHBOARD.html";
                } else {
                    showMessage("Invalid User ID or Password.");
                }
            } catch (error) {
                console.error('Login error:', error);
                showMessage("An error occurred. Please try again.");
            }
        });
    </script>
</body>
</html>